# SQL에 대한 얕은 이해

Django를 공부하는 도중 ORM이라는 개념이 나왔는데, SQL에 대한 개념이 전혀 없는 상태라서 이해하기가 힘들었다. 빠르게 짚고 넘어가는 수준에서 SQL을 정리해보려고 한다.

<br/>

## 1. SQL이란?

DB에서 데이터를 정의하고 조작하고 제어하기 위해 사용하는 언어이다. 따라서 데이터를 다루는  3가지 목적에 따라서 SQL statement를 구분하는 것이 가능하다.

### 정의 - DDL(Data Definition Language)

---

데이터베이스나 테이블 등을 생성, 삭제, 구조에 대한 변경을 위함.

e.g., `CREATE`, `ALTER`, `DROP`, etc

### 조작 - DML(Data Manipulation Language)

---

데이터베이스에 저장된 데이터를 처리, 조회, 검색을 위함.

e.g., `INSERT`, `UPDATE`, `DELETE`, `SELECT`, etc


### 제어 - DCL(Data Control Language)

---

데이터베이스에 저장된 데이터를 관리하기 위해 데이터의 보안성 및 무결성 등을 제어하기 위함

e.g., `GRANT`, `REVOKE`, etc

<br/>

## 2. 관계형 데이터베이스의 용어

### 행(row)

---

* 서로 연관이 있는 데이터들을 묶은 것이라고 볼 수 있다.

* 어떤 테이블에 존재하는 모든 행은 같은 수의 열을 가지고 있다.

* record, tuple 이라고 부르기도 한다.

### 열(column)

---

* 각각의 열은 고유의 이름을 가지고 있고, 자신만의 데이터 타입을 가진다.

* field, attribute 이라고 부르기도 한다.

### 값(value)

---

* 각각의 행과 열에 대응하는 값을 가진다.

* value는 열의 데이터 타입에 맞는 값이어야 한다.

### 키(key)

---

* 테이블에서 행의 식별자로 이용되는 열을 key 또는 기본 키(primary key, pk)라고 한다.

* 나를 식별해주는 주민등록번호나 ID 등과 같은 고유의 값은 기본 키가 될 수 있다.

SQL을 활용하는 공간인 RDB(Relational Data Base)에서 개체들 간에 관계가 형성되는데 관계 형성에 중요한 역할을 하는 것이 **기본 키**이다.

**기본키**는 개체를 식별하는 고유의 값으로 회원가입을 예로 들었을 때 회원 개개인은 개체이다. 그리고 이들 객체를 식별해주는 값이 ID일 수도 있고, 주민번호일 수도 있고, 혹은 핸드폰 번호가 될 수도 있다.

테이블에는 반드시 기본키 값을 저장하는 필드가 존재한다. 예를 들어서 특정 서비스에 회원가입하는 것을 생각해보자. 이 때 우리는 이메일 주소, 이름, 생년월일, 핸드폰번호, 집 주소등을 기입한다. 이 정보를 가지고 하나의 테이블을 생성한다고 하면 우리가 회원가입 시 기입한 정보들은 모두 하나의 record에 입력된다. 그리고 해당 서비스가 대규모 서비스라면 나를 제외한 많은 사람들도 자신의 데이터들을 기입할 것이고 수많은 record들이 생성될 것이다. 따라서 이 테이블에는 개개인을 식별할 수 있는 고유의 pk값이 저장되는 field가 필요하게 된다.

**외래키**(foreign key, fk)는 A라는 필드가 있고 그곳에 pk가 있을 때, B라는 필드와 A라는 필드 사이에 관계를 맺는다고 가정하면 A의 pk는 필드 B에서 fk가 된다.

### 관계

---

관계를 맺는 테이블의 수에 따라 다음과 같이 테이블 간의 관계를 분류할 수 있다.

* 일대일 관계

* 일대다 관계

* 다대다 관계

관계형 데이터베이스에서는 이러한 관계를 나타내기 위해서 외래 키(foreign key)를 사용한다. 이 때, 외래키는 한 테이블의 키 중에서 다른 테이블의 record를 식별할 수 있다.

### 스키마(schema)

테이블을 디자인하기 위한 청사진이다. 테이블의 각 열에 대한 항목과 타입뿐만 아니라 기본 키와 외래 키도 나타내야 한다.

스키마는 개체-관계 다이어그램이나 문자열로 표현하는 것이 가능하다.

```MySQL
Reservation(ID, Name, Data, RoomNum)
```

<br/>
<br/>

Ref.

[TCP SCHOOL](http://tcpschool.com/mysql/mysql_intro_relationalDB)
